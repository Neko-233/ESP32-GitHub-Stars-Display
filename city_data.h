#ifndef CITY_DATA_H
#define CITY_DATA_H

#include <string.h>

/**
 * 城市数据结构定义
 * 包含拼音名称、英文名称和adcode
 */
struct CityData {
  const char* pinyin;    // 拼音名称
  const char* english;   // 英文名称
  const char* adcode;    // 地区代码
};

/**
 * 全国城市数据数组
 * 按拼音排序，便于查找
 */
const CityData cities[] = {
  {"beijing", "Beijing", "110000"},
  {"tianjin", "Tianjin", "120000"},
  {"hebei", "Hebei Province", "130000"},
  {"shijiazhuang", "Shijiazhuang", "130100"},
  {"tangshan", "Tangshan", "130200"},
  {"qinhuangdao", "Qinhuangdao", "130300"},
  {"handan", "Handan", "130400"},
  {"xingtai", "Xingtai", "130500"},
  {"baoding", "Baoding", "130600"},
  {"zhangjiakou", "Zhangjiakou", "130700"},
  {"chengde", "Chengde", "130800"},
  {"cangzhou", "Cangzhou", "130900"},
  {"langfang", "Langfang", "131000"},
  {"hengshui", "Hengshui", "131100"},
  {"shanxi", "Shanxi Province", "140000"},
  {"taiyuan", "Taiyuan", "140100"},
  {"datong", "Datong", "140200"},
  {"yangquan", "Yangquan", "140300"},
  {"changzhi", "Changzhi", "140400"},
  {"jincheng", "Jincheng", "140500"},
  {"shuozhou", "Shuozhou", "140600"},
  {"jinzhong", "Jinzhong", "140700"},
  {"yuncheng", "Yuncheng", "140800"},
  {"xinzhou", "Xinzhou", "140900"},
  {"linfen", "Linfen", "141000"},
  {"lvliang", "Lvliang", "141100"},
  {"neimenggu", "Inner Mongolia", "150000"},
  {"huhehaote", "Hohhot", "150100"},
  {"baotou", "Baotou", "150200"},
  {"wuhai", "Wuhai", "150300"},
  {"chifeng", "Chifeng", "150400"},
  {"tongliao", "Tongliao", "150500"},
  {"eerduosi", "Ordos", "150600"},
  {"hulunbeier", "Hulunbuir", "150700"},
  {"bayannaoer", "Bayannur", "150800"},
  {"wulanchabu", "Ulanqab", "150900"},
  {"xinganmeng", "Hinggan League", "152200"},
  {"xilinguolemeng", "Xilingol League", "152500"},
  {"alashanmeng", "Alxa League", "152900"},
  {"liaoning", "Liaoning Province", "210000"},
  {"shenyang", "Shenyang", "210100"},
  {"dalian", "Dalian", "210200"},
  {"anshan", "Anshan", "210300"},
  {"fushun", "Fushun", "210400"},
  {"benxi", "Benxi", "210500"},
  {"dandong", "Dandong", "210600"},
  {"jinzhou", "Jinzhou", "210700"},
  {"yingkou", "Yingkou", "210800"},
  {"fuxin", "Fuxin", "210900"},
  {"liaoyang", "Liaoyang", "211000"},
  {"panjin", "Panjin", "211100"},
  {"tieling", "Tieling", "211200"},
  {"chaoyang", "Chaoyang", "211300"},
  {"huludao", "Huludao", "211400"},
  {"jilin", "Jilin Province", "220000"},
  {"changchun", "Changchun", "220100"},
  {"jilinshi", "Jilin City", "220200"},
  {"siping", "Siping", "220300"},
  {"liaoyuan", "Liaoyuan", "220400"},
  {"tonghua", "Tonghua", "220500"},
  {"baishan", "Baishan", "220600"},
  {"songyuan", "Songyuan", "220700"},
  {"baicheng", "Baicheng", "220800"},
  {"yanbian", "Yanbian Korean Autonomous Prefecture", "222400"},
  {"heilongjiang", "Heilongjiang Province", "230000"},
  {"haerbin", "Harbin", "230100"},
  {"qiqihaer", "Qiqihar", "230200"},
  {"jixi", "Jixi", "230300"},
  {"hegang", "Hegang", "230400"},
  {"shuangyashan", "Shuangyashan", "230500"},
  {"daqing", "Daqing", "230600"},
  {"yichun", "Yichun", "230700"},
  {"jiamusi", "Jiamusi", "230800"},
  {"qitaihe", "Qitaihe", "230900"},
  {"mudanjiang", "Mudanjiang", "231000"},
  {"heihe", "Heihe", "231100"},
  {"suihua", "Suihua", "231200"},
  {"daxinganling", "Greater Khingan Range", "232700"},
  {"shanghai", "Shanghai", "310000"},
  {"jiangsu", "Jiangsu Province", "320000"},
  {"nanjing", "Nanjing", "320100"},
  {"wuxi", "Wuxi", "320200"},
  {"xuzhou", "Xuzhou", "320300"},
  {"changzhou", "Changzhou", "320400"},
  {"suzhou", "Suzhou", "320500"},
  {"nantong", "Nantong", "320600"},
  {"lianyungang", "Lianyungang", "320700"},
  {"huaian", "Huai'an", "320800"},
  {"yancheng", "Yancheng", "320900"},
  {"yangzhou", "Yangzhou", "321000"},
  {"zhenjiang", "Zhenjiang", "321100"},
  {"taizhou", "Taizhou", "321200"},
  {"suqian", "Suqian", "321300"},
  {"zhejiang", "Zhejiang Province", "330000"},
  {"hangzhou", "Hangzhou", "330100"},
  {"ningbo", "Ningbo", "330200"},
  {"wenzhou", "Wenzhou", "330300"},
  {"jiaxing", "Jiaxing", "330400"},
  {"huzhou", "Huzhou", "330500"},
  {"shaoxing", "Shaoxing", "330600"},
  {"jinhua", "Jinhua", "330700"},
  {"quzhou", "Quzhou", "330800"},
  {"zhoushan", "Zhoushan", "330900"},
  {"taizhoushi", "Taizhou", "331000"},
  {"lishui", "Lishui", "331100"},
  {"anhui", "Anhui Province", "340000"},
  {"hefei", "Hefei", "340100"},
  {"wuhu", "Wuhu", "340200"},
  {"bengbu", "Bengbu", "340300"},
  {"huainan", "Huainan", "340400"},
  {"maanshan", "Ma'anshan", "340500"},
  {"huaibei", "Huaibei", "340600"},
  {"tongling", "Tongling", "340700"},
  {"anqing", "Anqing", "340800"},
  {"huangshan", "Huangshan", "341000"},
  {"chuzhou", "Chuzhou", "341100"},
  {"fuyang", "Fuyang", "341200"},
  {"suzhou", "Suzhou", "341300"},
  {"luan", "Lu'an", "341500"},
  {"bozhou", "Bozhou", "341600"},
  {"chizhou", "Chizhou", "341700"},
  {"xuancheng", "Xuancheng", "341800"},
  {"fujian", "Fujian Province", "350000"},
  {"fuzhou", "Fuzhou", "350100"},
  {"xiamen", "Xiamen", "350200"},
  {"putian", "Putian", "350300"},
  {"sanming", "Sanming", "350400"},
  {"quanzhou", "Quanzhou", "350500"},
  {"zhangzhou", "Zhangzhou", "350600"},
  {"nanping", "Nanping", "350700"},
  {"longyan", "Longyan", "350800"},
  {"ningde", "Ningde", "350900"},
  {"jiangxi", "Jiangxi Province", "360000"},
  {"nanchang", "Nanchang", "360100"},
  {"jingdezhen", "Jingdezhen", "360200"},
  {"pingxiang", "Pingxiang", "360300"},
  {"jiujiang", "Jiujiang", "360400"},
  {"xinyu", "Xinyu", "360500"},
  {"yingtan", "Yingtan", "360600"},
  {"ganzhou", "Ganzhou", "360700"},
  {"jian", "Ji'an", "360800"},
  {"yichunshi", "Yichun", "360900"},
  {"fuzhou", "Fuzhou", "361000"},
  {"shangrao", "Shangrao", "361100"},
  {"shandong", "Shandong Province", "370000"},
  {"jinan", "Jinan", "370100"},
  {"qingdao", "Qingdao", "370200"},
  {"zibo", "Zibo", "370300"},
  {"zaozhuang", "Zaozhuang", "370400"},
  {"dongying", "Dongying", "370500"},
  {"yantai", "Yantai", "370600"},
  {"weifang", "Weifang", "370700"},
  {"jining", "Jining", "370800"},
  {"taian", "Tai'an", "370900"},
  {"weihai", "Weihai", "371000"},
  {"rizhao", "Rizhao", "371100"},
  {"linyi", "Linyi", "371300"},
  {"dezhou", "Dezhou", "371400"},
  {"liaocheng", "Liaocheng", "371500"},
  {"binzhou", "Binzhou", "371600"},
  {"heze", "Heze", "371700"},
  {"henan", "Henan Province", "410000"},
  {"zhengzhou", "Zhengzhou", "410100"},
  {"kaifeng", "Kaifeng", "410200"},
  {"luoyang", "Luoyang", "410300"},
  {"pingdingshan", "Pingdingshan", "410400"},
  {"anyang", "Anyang", "410500"},
  {"hebi", "Hebi", "410600"},
  {"xinxiang", "Xinxiang", "410700"},
  {"jiaozuo", "Jiaozuo", "410800"},
  {"puyang", "Puyang", "410900"},
  {"xuchang", "Xuchang", "411000"},
  {"luohe", "Luohe", "411100"},
  {"sanmenxia", "Sanmenxia", "411200"},
  {"nanyang", "Nanyang", "411300"},
  {"shangqiu", "Shangqiu", "411400"},
  {"xinyang", "Xinyang", "411500"},
  {"zhoukou", "Zhoukou", "411600"},
  {"zhumadian", "Zhumadian", "411700"},
  {"jiyuan", "Jiyuan", "419001"},
  {"hubei", "Hubei Province", "420000"},
  {"wuhan", "Wuhan", "420100"},
  {"huangshi", "Huangshi", "420200"},
  {"shiyan", "Shiyan", "420300"},
  {"yichang", "Yichang", "420500"},
  {"xiangyang", "Xiangyang", "420600"},
  {"ezhou", "Ezhou", "420700"},
  {"jingmen", "Jingmen", "420800"},
  {"xiaogan", "Xiaogan", "420900"},
  {"jingzhou", "Jingzhou", "421000"},
  {"huanggang", "Huanggang", "421100"},
  {"xianning", "Xianning", "421200"},
  {"suizhou", "Suizhou", "421300"},
  {"enshi", "Enshi Tujia and Miao Autonomous Prefecture", "422800"},
  {"xiantao", "Xiantao", "429004"},
  {"qianjiang", "Qianjiang", "429005"},
  {"tianmen", "Tianmen", "429006"},
  {"shennongjia", "Shennongjia Forestry District", "429021"},
  {"hunan", "Hunan Province", "430000"},
  {"changsha", "Changsha", "430100"},
  {"zhuzhou", "Zhuzhou", "430200"},
  {"xiangtan", "Xiangtan", "430300"},
  {"hengyang", "Hengyang", "430400"},
  {"shaoyang", "Shaoyang", "430500"},
  {"yueyang", "Yueyang", "430600"},
  {"changde", "Changde", "430700"},
  {"zhangjiajie", "Zhangjiajie", "430800"},
  {"yiyang", "Yiyang", "430900"},
  {"chenzhou", "Chenzhou", "431000"},
  {"yongzhou", "Yongzhou", "431100"},
  {"huaihua", "Huaihua", "431200"},
  {"loudi", "Loudi", "431300"},
  {"xiangxi", "Xiangxi Tujia and Miao Autonomous Prefecture", "433100"},
  {"guangdong", "Guangdong Province", "440000"},
  {"guangzhou", "Guangzhou", "440100"},
  {"shaoguan", "Shaoguan", "440200"},
  {"shenzhen", "Shenzhen", "440300"},
  {"zhuhai", "Zhuhai", "440400"},
  {"shantou", "Shantou", "440500"},
  {"foshan", "Foshan", "440600"},
  {"jiangmen", "Jiangmen", "440700"},
  {"zhanjiang", "Zhanjiang", "440800"},
  {"maoming", "Maoming", "440900"},
  {"zhaoqing", "Zhaoqing", "441200"},
  {"huizhou", "Huizhou", "441300"},
  {"meizhou", "Meizhou", "441400"},
  {"shanwei", "Shanwei", "441500"},
  {"heyuan", "Heyuan", "441600"},
  {"yangjiang", "Yangjiang", "441700"},
  {"qingyuan", "Qingyuan", "441800"},
  {"dongguan", "Dongguan", "441900"},
  {"zhongshan", "Zhongshan", "442000"},
  {"chaozhou", "Chaozhou", "445100"},
  {"jieyang", "Jieyang", "445200"},
  {"yunfu", "Yunfu", "445300"},
  {"guangxi", "Guangxi Zhuang Autonomous Region", "450000"},
  {"nanning", "Nanning", "450100"},
  {"liuzhou", "Liuzhou", "450200"},
  {"guilin", "Guilin", "450300"},
  {"wuzhou", "Wuzhou", "450400"},
  {"beihai", "Beihai", "450500"},
  {"fangchenggang", "Fangchenggang", "450600"},
  {"qinzhou", "Qinzhou", "450700"},
  {"guigang", "Guigang", "450800"},
  {"yulin", "Yulin", "450900"},
  {"baise", "Baise", "451000"},
  {"hezhou", "Hezhou", "451100"},
  {"hechi", "Hechi", "451200"},
  {"laibin", "Laibin", "451300"},
  {"chongzuo", "Chongzuo", "451400"},
  {"hainan", "Hainan Province", "460000"},
  {"haikou", "Haikou", "460100"},
  {"sanya", "Sanya", "460200"},
  {"sansha", "Sansha", "460300"},
  {"danzhou", "Danzhou", "460400"},
  {"wuzhishan", "Wuzhishan", "469001"},
  {"qionghai", "Qionghai", "469002"},
  {"wenchang", "Wenchang", "469005"},
  {"wanning", "Wanning", "469006"},
  {"dongfang", "Dongfang", "469007"},
  {"dingan", "Ding'an County", "469021"},
  {"tunchang", "Tunchang County", "469022"},
  {"chengmai", "Chengmai County", "469023"},
  {"lingao", "Lingao County", "469024"},
  {"baisha", "Baisha Li Autonomous County", "469025"},
  {"changjiang", "Changjiang Li Autonomous County", "469026"},
  {"ledong", "Ledong Li Autonomous County", "469027"},
  {"lingshui", "Lingshui Li Autonomous County", "469028"},
  {"baoting", "Baoting Li and Miao Autonomous County", "469029"},
  {"qiongzhong", "Qiongzhong Li and Miao Autonomous County", "469030"},
  {"chongqing", "Chongqing", "500000"},
  {"sichuan", "Sichuan Province", "510000"},
  {"chengdu", "Chengdu", "510100"},
  {"zigong", "Zigong", "510300"},
  {"panzhihua", "Panzhihua", "510400"},
  {"luzhou", "Luzhou", "510500"},
  {"deyang", "Deyang", "510600"},
  {"mianyang", "Mianyang", "510700"},
  {"guangyuan", "Guangyuan", "510800"},
  {"suining", "Suining", "510900"},
  {"neijiang", "Neijiang", "511000"},
  {"leshan", "Leshan", "511100"},
  {"nanchong", "Nanchong", "511300"},
  {"meishan", "Meishan", "511400"},
  {"yibin", "Yibin", "511500"},
  {"guangan", "Guang'an", "511600"},
  {"dazhou", "Dazhou", "511700"},
  {"yaan", "Ya'an", "511800"},
  {"bazhong", "Bazhong", "511900"},
  {"ziyang", "Ziyang", "512000"},
  {"aba", "Aba Tibetan and Qiang Autonomous Prefecture", "513200"},
  {"ganzi", "Garze Tibetan Autonomous Prefecture", "513300"},
  {"liangshan", "Liangshan Yi Autonomous Prefecture", "513400"},
  {"guizhou", "Guizhou Province", "520000"},
  {"guiyang", "Guiyang", "520100"},
  {"liupanshui", "Liupanshui", "520200"},
  {"zunyi", "Zunyi", "520300"},
  {"anshun", "Anshun", "520400"},
  {"bijie", "Bijie", "520500"},
  {"tongren", "Tongren", "520600"},
  {"qianxinan", "Qianxinan Buyei and Miao Autonomous Prefecture", "522300"},
  {"qiandongnan", "Qiandongnan Miao and Dong Autonomous Prefecture", "522600"},
  {"qiannan", "Qiannan Buyei and Miao Autonomous Prefecture", "522700"},
  {"yunnan", "Yunnan Province", "530000"},
  {"kunming", "Kunming", "530100"},
  {"qujing", "Qujing", "530300"},
  {"yuxi", "Yuxi", "530400"},
  {"baoshan", "Baoshan", "530500"},
  {"zhaotong", "Zhaotong", "530600"},
  {"lijiang", "Lijiang", "530700"},
  {"puer", "Pu'er", "530800"},
  {"lincang", "Lincang", "530900"},
  {"chuxiong", "Chuxiong Yi Autonomous Prefecture", "532300"},
  {"honghe", "Honghe Hani and Yi Autonomous Prefecture", "532500"},
  {"wenshan", "Wenshan Zhuang and Miao Autonomous Prefecture", "532600"},
  {"xishuangbanna", "Xishuangbanna Dai Autonomous Prefecture", "532800"},
  {"dali", "Dali Bai Autonomous Prefecture", "532900"},
  {"dehong", "Dehong Dai and Jingpo Autonomous Prefecture", "533100"},
  {"nujiang", "Nujiang Lisu Autonomous Prefecture", "533300"},
  {"diqing", "Diqing Tibetan Autonomous Prefecture", "533400"},
  {"xizang", "Tibet Autonomous Region", "540000"},
  {"lasa", "Lhasa", "540100"},
  {"rikaze", "Shigatse", "540200"},
  {"changdu", "Chamdo", "540300"},
  {"linzhi", "Nyingchi", "540400"},
  {"shannan", "Shannan", "540500"},
  {"naqu", "Nagqu", "540600"},
  {"ali", "Ngari Prefecture", "542500"},
  {"shaanxi", "Shaanxi Province", "610000"},
  {"xian", "Xi'an", "610100"},
  {"tongchuan", "Tongchuan", "610200"},
  {"baoji", "Baoji", "610300"},
  {"xianyang", "Xianyang", "610400"},
  {"weinan", "Weinan", "610500"},
  {"yanan", "Yan'an", "610600"},
  {"hanzhong", "Hanzhong", "610700"},
  {"yulin", "Yulin", "610800"},
  {"ankang", "Ankang", "610900"},
  {"shangluo", "Shangluo", "611000"},
  {"gansu", "Gansu Province", "620000"},
  {"lanzhou", "Lanzhou", "620100"},
  {"jiayuguan", "Jiayuguan", "620200"},
  {"jinchang", "Jinchang", "620300"},
  {"baiyin", "Baiyin", "620400"},
  {"tianshui", "Tianshui", "620500"},
  {"wuwei", "Wuwei", "620600"},
  {"zhangye", "Zhangye", "620700"},
  {"pingliang", "Pingliang", "620800"},
  {"jiuquan", "Jiuquan", "620900"},
  {"qingyang", "Qingyang", "621000"},
  {"dingxi", "Dingxi", "621100"},
  {"longnan", "Longnan", "621200"},
  {"linxia", "Linxia Hui Autonomous Prefecture", "622900"},
  {"gannan", "Gannan Tibetan Autonomous Prefecture", "623000"},
  {"qinghai", "Qinghai Province", "630000"},
  {"xining", "Xining", "630100"},
  {"haidong", "Haidong", "630200"},
  {"haibei", "Haibei Tibetan Autonomous Prefecture", "632200"},
  {"huangnan", "Huangnan Tibetan Autonomous Prefecture", "632300"},
  {"hainan", "Hainan Tibetan Autonomous Prefecture", "632500"},
  {"guoluo", "Golog Tibetan Autonomous Prefecture", "632600"},
  {"yushu", "Yushu Tibetan Autonomous Prefecture", "632700"},
  {"haixi", "Haixi Mongol and Tibetan Autonomous Prefecture", "632800"},
  {"ningxia", "Ningxia Hui Autonomous Region", "640000"},
  {"yinchuan", "Yinchuan", "640100"},
  {"shizuishan", "Shizuishan", "640200"},
  {"wuzhong", "Wuzhong", "640300"},
  {"guyuan", "Guyuan", "640400"},
  {"zhongwei", "Zhongwei", "640500"},
  {"xinjiang", "Xinjiang Uygur Autonomous Region", "650000"},
  {"wulumuqi", "Urumqi", "650100"},
  {"kelamayi", "Karamay", "650200"},
  {"tulufan", "Turpan", "650400"},
  {"hami", "Hami", "650500"},
  {"changji", "Changji Hui Autonomous Prefecture", "652300"},
  {"boertala", "Bortala Mongol Autonomous Prefecture", "652700"},
  {"bayinguoleng", "Bayingolin Mongol Autonomous Prefecture", "652800"},
  {"akesu", "Aksu Prefecture", "652900"},
  {"kezilesu", "Kizilsu Kyrgyz Autonomous Prefecture", "653000"},
  {"kashi", "Kashgar Prefecture", "653100"},
  {"hetian", "Hotan Prefecture", "653200"},
  {"yili", "Ili Kazakh Autonomous Prefecture", "654000"},
  {"tacheng", "Tacheng Prefecture", "654200"},
  {"aletai", "Altay Prefecture", "654300"},
  {"shihezi", "Shihezi", "659001"},
  {"alaer", "Aral", "659002"},
  {"tumushuke", "Tumxuk", "659003"},
  {"wujiaqu", "Wujiaqu", "659004"},
  {"beitun", "Beitun", "659005"},
  {"tiemenguan", "Tiemenguan", "659006"},
  {"shuanghe", "Shuanghe", "659007"},
  {"kekedala", "Kokdala", "659008"},
  {"kunyu", "Kunyu", "659009"},
  {"huyanghe", "Huyanghe", "659010"},
  {"xinxing", "Xinxing", "659011"},
  {"taiwan", "Taiwan Province", "710000"},
  {"xianggang", "Hong Kong SAR", "810000"},
  {"aomen", "Macao SAR", "820000"}
};

// 城市数组大小
const int CITY_COUNT = sizeof(cities) / sizeof(CityData);

/**
 * 根据拼音查找城市信息
 * @param pinyin 拼音城市名
 * @return 找到的城市数据指针，未找到返回nullptr
 */
const CityData* findCityByPinyin(const char* pinyin) {
  for (int i = 0; i < CITY_COUNT; i++) {
    if (strcmp(cities[i].pinyin, pinyin) == 0) {
      return &cities[i];
    }
  }
  return nullptr;
}

/**
 * 根据adcode查找城市信息
 * @param adcode 地区代码
 * @return 找到的城市数据指针，未找到返回nullptr
 */
const CityData* findCityByAdcode(const char* adcode) {
  for (int i = 0; i < CITY_COUNT; i++) {
    if (strcmp(cities[i].adcode, adcode) == 0) {
      return &cities[i];
    }
  }
  return nullptr;
}

/**
 * 模糊搜索城市信息（支持缩写匹配）
 * @param input 用户输入的搜索词
 * @return 找到的城市数据指针，未找到返回nullptr
 */
const CityData* findCityByFuzzySearch(const char* input) {
  // 首先尝试完全匹配
  const CityData* result = findCityByPinyin(input);
  if (result != nullptr) {
    return result;
  }
  
  // 定义常用城市缩写映射
  struct CityAbbreviation {
    const char* abbrev;
    const char* fullName;
  };
  
  static const CityAbbreviation abbreviations[] = {
    // 直辖市
    {"bj", "beijing"},
    {"sh", "shanghai"},
    {"tj", "tianjin"},
    {"cq", "chongqing"},
    
    // 省会城市
    {"gz", "guangzhou"},
    {"sz", "shenzhen"},
    {"nj", "nanjing"},
    {"hz", "hangzhou"},
    {"wh", "wuhan"},
    {"cd", "chengdu"},
    {"xa", "xian"},
    {"sy", "shenyang"},
    {"dl", "dalian"},
    {"cc", "changchun"},
    {"hrb", "haerbin"},
    {"jn", "jinan"},
    {"qd", "qingdao"},
    {"zz", "zhengzhou"},
    {"cs", "changsha"},
    {"nc", "nanchang"},
    {"hf", "hefei"},
    {"fz", "fuzhou"},
    {"xm", "xiamen"},
    {"nn", "nanning"},
    {"km", "kunming"},
    {"gy", "guiyang"},
    {"lz", "lanzhou"},
    {"xn", "xining"},
    {"yc", "yinchuan"},
    {"wlmq", "wulumuqi"},
    {"hk", "haikou"},
    {"ls", "lasa"},
    
    // 其他重要城市
    {"nb", "ningbo"},
    {"wx", "wuxi"},
    {"su", "suzhou"},
    {"nt", "nantong"},
    {"yc", "yancheng"},
    {"xuzhou", "xuzhou"},
    {"cz", "changzhou"},
    {"zj", "zhenjiang"},
    {"tz", "taizhou"},
    {"ly", "lianyungang"},
    {"ha", "huaian"},
    {"sq", "suqian"},
    {"yx", "yixing"},
    {"jx", "jiaxing"},
    {"hu", "huzhou"},
    {"sx", "shaoxing"},
    {"jh", "jinhua"},
    {"qu", "quzhou"},
    {"zs", "zhoushan"},
    {"tz", "taizhou"},
    {"lishui", "lishui"}
  };
  
  // 查找缩写匹配
  int abbrevCount = sizeof(abbreviations) / sizeof(CityAbbreviation);
  for (int i = 0; i < abbrevCount; i++) {
    if (strcmp(abbreviations[i].abbrev, input) == 0) {
      return findCityByPinyin(abbreviations[i].fullName);
    }
  }
  
  // 部分匹配搜索
  for (int i = 0; i < CITY_COUNT; i++) {
    // 检查是否包含输入的字符串
    if (strstr(cities[i].pinyin, input) != nullptr) {
      return &cities[i];
    }
  }
  
  return nullptr;
}

#endif // CITY_DATA_H